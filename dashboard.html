<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Tasks</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { display:flex; background:#f4f6f9; color:#333; height:100vh; }

    /* Sidebar */
    .sidebar { width:240px; background:#fff; border-right:1px solid #e5e7eb; padding:20px; box-shadow:2px 0 8px rgba(0,0,0,0.05); }
    .sidebar-header { display:flex; align-items:center; font-size:20px; font-weight:bold; margin-bottom:30px; padding-bottom:10px; border-bottom:2px solid #3b82f6; color:#3b82f6; }
    .sidebar-header i { font-size:22px; margin-right:10px; }
    .menu { list-style:none; }
    .menu li { padding:12px; font-size:16px; cursor:pointer; border-radius:8px; transition:0.2s; display:flex; align-items:center; }
    .menu li a { text-decoration:none; color:#333; margin-left:8px; }
    .menu li:hover { background:#eef5ff; color:#3b82f6; }
    .menu li:hover a { color:#3b82f6; }

    /* Main */
    .main { flex:1; display:flex; flex-direction:column; padding:20px 30px; overflow-y:auto; }
    .main-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }
    .main-header h2 { font-size:24px; font-weight:bold; color:#111827; }
    .search-container { display:flex; align-items:center; background:#fff; padding:6px 14px; border:1px solid #ddd; border-radius:20px; box-shadow:0px 2px 6px rgba(0,0,0,0.08); }
    .search-container input { border:none; outline:none; padding:6px 10px; font-size:14px; background:transparent; width:200px; }
    .search-container i { color:#3b82f6; margin-left:8px; cursor:pointer; }

    /* Fields Layout */
    .fields { display:grid; grid-template-columns:repeat(2, 1fr); grid-gap:20px; flex:1; }
    .field-box { padding:20px; border-radius:12px; box-shadow:0 3px 8px rgba(0,0,0,0.06); display:flex; flex-direction:column; color:black; }
    .field-box-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .field-box h3 { font-size:18px; display:flex; align-items:center; gap:8px; }

    /* Add Button */
    .add-btn { font-size:18px; border:none; border-radius:50%; width:32px; height:32px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:0.3s; }

    /* Categories */
    #healthBox { background:#f3c1e0; } #healthBox h3 i { color:#f75e5e; } #healthBox .add-btn { background:#f75e5e; color:#fff; }
    #shoppingBox { background:#cfffc3; } #shoppingBox h3 i { color:#1b7205; } #shoppingBox .add-btn { background:#1b7205; color:#fff; }
    #workBox { background:#c9c6c6; } #workBox h3 i { color:#899cf7; } #workBox .add-btn { background:#899cf7; color:#fff; }
    #personalBox { background:#ffe5d7; } #personalBox h3 i { color:#f1ad88; } #personalBox .add-btn { background:#f1ad88; color:#fff; }

    /* Task input */
    .add-task { display:none; margin-bottom:15px; }
    .add-task input { width:100%; padding:10px; border:1px solid #ccc; border-radius:8px; outline:none; }

    /* Task list */
    .task-list { flex:1; overflow-y:auto; }
    .task-card { background:#f9fafb; padding:10px 14px; border-radius:8px; margin-bottom:10px; font-size:14px; box-shadow:0 1px 3px rgba(0,0,0,0.05); display:flex; flex-direction:column; }
    .task-top { display:flex; justify-content:space-between; align-items:center; }
    .task-meta { display:flex; justify-content:space-between; font-size:12px; color:#555; margin-top:6px; }
    .task-card.completed { text-decoration:line-through; color:#10b981; font-weight:bold; }

    .task-actions { display:flex; gap:8px; }

    /* Hide sections initially */
    #upcomingSection, #analysisSection { display:none; }

    /* Analysis Section */
    .analysis-container { display:flex; gap:20px; margin-bottom:30px; }
    .analysis-card { flex:1; background:#fff; border-radius:12px; padding:20px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,0.1); transition:0.3s; }
    .analysis-card h3 { font-size:20px; margin-bottom:10px; }
    .analysis-card p { font-size:28px; font-weight:bold; color:#3b82f6; }
    .analysis-card:hover { transform:translateY(-5px); }
    .chart-container { background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); max-width:500px; margin:auto; }

  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header"><i>â˜°</i> To Do List</div>
    <ul class="menu">
      <li onclick="showCategory()"><i class="fa fa-home"></i><a href="#"> Home</a></li>
      <li onclick="showUpcoming()"><i class="fa fa-calendar-alt"></i><a href="#"> Upcoming</a></li>
      <li onclick="showAnalysis()"><i class="fa fa-chart-pie"></i><a href="#"> Analysis</a></li>
    </ul>
  </div>

  <!-- Main -->
  <div class="main">
    <div class="main-header">
      <h2 id="pageTitle">Category</h2>
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search tasks...">
        <i class="fa fa-search" onclick="searchTask()"></i>
      </div>
    </div>

    <!-- Categories Section -->
    <div class="fields" id="categorySection">
      <div class="field-box" id="workBox">
        <div class="field-box-header">
          <h3><i class="fa fa-briefcase"></i> Work</h3>
          <button class="add-btn" onclick="toggleInput('work')"><i class="fa fa-plus"></i></button>
        </div>
        <div class="add-task" id="workInputBox"><input type="text" id="workInput" placeholder="Add work task..." onkeypress="if(event.key==='Enter'){addTask('work')}"></div>
        <div class="task-list" id="workList"></div>
      </div>

      <div class="field-box" id="personalBox">
        <div class="field-box-header">
          <h3><i class="fa fa-user"></i> Personal</h3>
          <button class="add-btn" onclick="toggleInput('personal')"><i class="fa fa-plus"></i></button>
        </div>
        <div class="add-task" id="personalInputBox"><input type="text" id="personalInput" placeholder="Add personal task..." onkeypress="if(event.key==='Enter'){addTask('personal')}"></div>
        <div class="task-list" id="personalList"></div>
      </div>

      <div class="field-box" id="shoppingBox">
        <div class="field-box-header">
          <h3><i class="fa fa-shopping-cart"></i> Shopping</h3>
          <button class="add-btn" onclick="toggleInput('shopping')"><i class="fa fa-plus"></i></button>
        </div>
        <div class="add-task" id="shoppingInputBox"><input type="text" id="shoppingInput" placeholder="Add shopping task..." onkeypress="if(event.key==='Enter'){addTask('shopping')}"></div>
        <div class="task-list" id="shoppingList"></div>
      </div>

      <div class="field-box" id="healthBox">
        <div class="field-box-header">
          <h3><i class="fa fa-heartbeat"></i> Health Care</h3>
          <button class="add-btn" onclick="toggleInput('health')"><i class="fa fa-plus"></i></button>
        </div>
        <div class="add-task" id="healthInputBox"><input type="text" id="healthInput" placeholder="Add health task..." onkeypress="if(event.key==='Enter'){addTask('health')}"></div>
        <div class="task-list" id="healthList"></div>
      </div>
    </div>

    <!-- Upcoming Section -->
    <div id="upcomingSection">
      <div class="field-box" style="margin-top:20px; background:#dceeff;">
        <div class="field-box-header"><h3><i class="fa fa-calendar-alt"></i> Pending</h3></div>
        <div class="task-list" id="upcomingList"></div>
      </div>
    </div>

    <!-- Analysis Section -->
    <div id="analysisSection">
      <div class="analysis-container">
        <div class="analysis-card">
          <h3>Total Tasks</h3>
          <p id="totalTasks">0</p>
        </div>
        <div class="analysis-card">
          <h3>Completed</h3>
          <p id="completedTasks">0</p>
        </div>
        <div class="analysis-card">
          <h3>Pending</h3>
          <p id="pendingTasks">0</p>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="taskChart"></canvas>
      </div>
    </div>
  </div>

<script>
  const tasks = { work: [], personal: [], shopping: [], health: [] };
  let chart;

  function toggleInput(type) {
    const box = document.getElementById(type+"InputBox");
    box.style.display = (box.style.display==="flex")?"none":"flex";
  }

  function addTask(type) {
    const input = document.getElementById(type+"Input");
    const text = input.value.trim();
    if (!text) return;
    const now = new Date();
    const date = now.toLocaleDateString();
    const time = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    tasks[type].push({ text, completed:false, date, time });
    input.value="";
    renderTasks(type);
    renderUpcoming();
    updateAnalysis();
  }

  function toggleTask(type, i) {
    tasks[type][i].completed = !tasks[type][i].completed;
    renderTasks(type);
    renderUpcoming();
    updateAnalysis();
  }

  function removeTask(type, i) {
    tasks[type].splice(i,1);
    renderTasks(type);
    renderUpcoming();
    updateAnalysis();
  }

  function renderTasks(type) {
    const list=document.getElementById(type+"List");
    list.innerHTML="";
    tasks[type].forEach((task,i)=>{
      const div=document.createElement("div");
      div.className="task-card "+(task.completed?"completed":"");
      div.innerHTML=`
        <div class="task-top">
          <span onclick="toggleTask('${type}',${i})">${task.text}</span>
          <div class="task-actions">
            <i class="fa fa-check" style="color:green;cursor:pointer;" onclick="toggleTask('${type}',${i})"></i>
            <i class="fa fa-trash" style="color:#ef4444;cursor:pointer;" onclick="removeTask('${type}',${i})"></i>
          </div>
        </div>
        <div class="task-meta"><span>${task.date}</span><span>${task.time}</span></div>`;
      list.appendChild(div);
    });
  }

  function renderUpcoming() {
    const list=document.getElementById("upcomingList");
    list.innerHTML="";
    for(const type in tasks){
      tasks[type].forEach(task=>{
        if(!task.completed){
          const div=document.createElement("div");
          div.className="task-card";
          div.innerHTML=`
            <div class="task-top"><span>${task.text}</span></div>
            <div class="task-meta"><span>${task.date}</span><span>${task.time}</span></div>`;
          list.appendChild(div);
        }
      });
    }
  }

  function updateAnalysis(){
    let total=0,completed=0,pending=0;
    const categoryCounts = { work:0, personal:0, shopping:0, health:0 };
    for(const type in tasks){
      tasks[type].forEach(task=>{
        total++;
        if(task.completed) completed++; else pending++;
        categoryCounts[type]++;
      });
    }
    document.getElementById("totalTasks").innerText=total;
    document.getElementById("completedTasks").innerText=completed;
    document.getElementById("pendingTasks").innerText=pending;

    updateChart(categoryCounts);
  }

  function updateChart(categoryCounts){
    const ctx = document.getElementById('taskChart').getContext('2d');
    const labels = ["Work","Personal","Shopping","Health"];
    const data = [
      categoryCounts.work,
      categoryCounts.personal,
      categoryCounts.shopping,
      categoryCounts.health
    ];
    const colors = ["#899cf7","#f1ad88","#1b7205","#f75e5e"];
    if(chart) chart.destroy();
    chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: colors,
          borderWidth: 1
        }]
      },
      options: {
        responsive:true,
        plugins:{
          legend:{ position:"bottom" },
          tooltip:{
            callbacks:{
              label: function(context){
                const total = context.dataset.data.reduce((a,b)=>a+b,0);
                const value = context.raw;
                const percentage = total ? ((value/total)*100).toFixed(1) : 0;
                return `${context.label}: ${value} (${percentage}%)`;
              }
            }
          }
        }
      }
    });
  }

  function searchTask(){
    const query=document.getElementById("searchInput").value.toLowerCase();
    for(const type in tasks){
      const list=document.getElementById(type+"List");
      list.innerHTML="";
      tasks[type].forEach((task,i)=>{
        if(task.text.toLowerCase().includes(query)||query===""){
          const div=document.createElement("div");
          div.className="task-card "+(task.completed?"completed":"");
          div.innerHTML=`
            <div class="task-top">
              <span onclick="toggleTask('${type}',${i})">${task.text}</span>
              <div class="task-actions">
                <i class="fa fa-check" style="color:green;cursor:pointer;" onclick="toggleTask('${type}',${i})"></i>
                <i class="fa fa-trash" style="color:#ef4444;cursor:pointer;" onclick="removeTask('${type}',${i})"></i>
              </div>
            </div>
            <div class="task-meta"><span>${task.date}</span><span>${task.time}</span></div>`;
          list.appendChild(div);
        }
      });
    }
  }
  document.getElementById("searchInput").addEventListener("input",searchTask);

  // Show/Hide sections
  // Show/Hide sections
function showUpcoming(){
  document.getElementById("categorySection").style.display="none";
  document.getElementById("upcomingSection").style.display="block";
  document.getElementById("analysisSection").style.display="none";
  document.getElementById("pageTitle").innerText="Upcoming";
  document.querySelector(".search-container").style.display = "none"; // hide search
}

function showCategory(){
  document.getElementById("categorySection").style.display="grid";
  document.getElementById("upcomingSection").style.display="none";
  document.getElementById("analysisSection").style.display="none";
  document.getElementById("pageTitle").innerText="Category";
  document.querySelector(".search-container").style.display = "flex"; // show search
}

function showAnalysis(){
  document.getElementById("categorySection").style.display="none";
  document.getElementById("upcomingSection").style.display="none";
  document.getElementById("analysisSection").style.display="block";
  document.getElementById("pageTitle").innerText="Analysis";
  document.querySelector(".search-container").style.display = "none"; // hide search
  updateAnalysis();
}

</script>
</body>
</html>
